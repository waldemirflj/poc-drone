pipeline:
  npm-install:
    image: node:8.15.0-alpine
    commands:
      - cd api/
      - npm install
    when:
      branch: [ develop ]
      event: [ push ]

  npm-test:
    image: node:8.15.0-alpine
    commands:
      - cd api/
      - npm test
    when:
      branch: [ develop ]
      event: [ push ]
  
  docker-registry-push:
    image: plugins/docker
    repo: waldemirflj/poc-drone
    secrets: [ private_docker_username, private_docker_password ]
    when:
      branch: [ develop ]
        

